// macro-navigator
// simplify driving the browser to registered locations/states
// pass in an existing client, else default to auto-creating a new one
"use strict";
var _ = require('underscore');
var webdriverio = require('webdriverio');


function Navigator (options) {
    this.client = options.client || webdriverio.remote(options.wdOptions);
    this.client.init();
    this.addCommands();
    _.extend(this, options);
}

Navigator.prototype.go = function(options) {
    this.client.getUrlAndTitle();
};

Navigator.prototype.addCommands = function() {
    var self = this.client;
    this.client.addCommand("getUrlAndTitle", function(customVar, cb) {
        self.url(function(err,urlResult) {
            self.getTitle(function(err,titleResult) {
                var specialResult = {url: urlResult.value, title: titleResult};
                if (cb) {
                    cb(err,specialResult);
                }
                console.log(customVar); // "a custom variable"
            });
        });
    });
};

module.exports = Navigator;
